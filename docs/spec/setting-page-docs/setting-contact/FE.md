# Settings › Contact — Frontend Spec (v0)

この文書は「問い合わせ」ページのフロント最終仕様です。既存の設定UI/スタイルに準拠し、外部UIライブラリは使用しません。

## 0. ルーティング / 導線
- 正式URL: `/settings/contact`
- エイリアス: `/contact`（将来のために同挙動。必要なら `/contact` → `/settings/contact` リダイレクト）
- 左ナビ「問い合わせ」から遷移（既存ナビ構成に準拠）

## 1. フォーム項目（v0）
- カテゴリ（必須・セレクト）
  - 候補: アカウント・ログイン / ご利用システム / 料金のお支払い / バグ・不具合 / ご意見・ご要望 / その他
- メールアドレス（必須）
  - ログイン済みならセッションの email を初期表示（編集可）
- タイトル（必須、1〜120文字）
- お問い合わせ内容（必須、20〜5,000文字）
- 添付ファイル（任意）
  - 最大3ファイル、合計10MBまで
  - 許可拡張子: pdf,csv,xlsx,xls,png,jpg,jpeg
- 同意チェック（必須）
  - 文言: 「個人情報の取り扱いに同意する」
  - 「プライバシーポリシー」を新規タブで開くリンク（ダミーで可）

## 2. 送信挙動
- 送信ボタン押下 → ローディング → 成功: 成功パネル表示（例: 「送信を受け付けました（チケットID: #ABC123）。確認メールを送信しました。」）
- 失敗: エラー文言表示（再試行/メール連絡先リンク）、入力値は保持
- 二重送信防止: 送信中はボタン disabled
- キーボード送信: なし（クリックのみ）

## 3. バリデーション（クライアント）
- 必須/長さ/メール形式/拡張子・サイズ制限を即時検証
- 連投対策: 前回送信から30秒間は送信ボタンを無効化
- HTMLタグは無効化/エスケープ（送信前にサニタイズ）

## 4. アクセシビリティ
- ラベル/説明/エラーを aria-describedby で関連付け
- エラー時は最初のエラー要素へフォーカス移動
- 成功トースト/パネルは aria-live="polite"

## 5. 画面構成（このアプリのUIに合わせた分割）
- <ContactFormPage>
  - <CategorySelect />
  - <EmailInput prefillFromSession />
  - <TitleInput />
  - <MessageTextarea />
  - <AttachmentUploader maxFiles=3 maxSizeMB=10 accept=".pdf,.csv,.xlsx,.xls,.png,.jpg,.jpeg" />
  - <PrivacyConsentCheckbox link="/privacy" target="_blank" />
  - <SubmitButton />
  - <SuccessPanel ticketId />（送信成功後のみ表示）

## 6. DoD
- ログイン済みでアクセスするとメール欄が自動入力される（編集可）
- 必須/長さ/サイズ/拡張子のバリデーションが有効
- 送信成功でチケットIDを表示し、確認メールが届く
- 失敗時にエラー説明が出て、内容は保持されたまま
- /settings/contact をブックマーク/共有しても同じ挙動
- プライバシーポリシーは新規タブで開く

## 7. やらない（v0）
- アプリ内でのチケット閲覧・返信UI（メール運用）
- 自動エスカレーション/SLA計測
- ヘルプ検索連携/FAQサジェスト

